<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Healthcare Test Result Prediction</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
    body {
        font-family: "Segoe UI", Arial;
        background: linear-gradient(135deg, #e3f2fd, #fce4ec);
        padding: 20px;
    }
    .card {
        max-width: 650px;
        margin: auto;
        background: #fff;
        padding: 25px;
        border-radius: 14px;
        box-shadow: 0 10px 25px rgba(0,0,0,0.15);
        animation: fadeIn 0.5s ease;
    }
    @keyframes fadeIn {
        from {opacity:0; transform: translateY(10px);}
        to {opacity:1; transform: translateY(0);}
    }
    h1 {
        text-align:center;
        margin-top:0;
    }
    .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
    }
    input {
        width: 100%;
        padding: 10px;
        margin-top: 4px;
        border-radius: 6px;
        border: 1px solid #ccc;
    }
    button {
        width: 100%;
        padding: 12px;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        font-weight: bold;
        cursor:pointer;
        background: #1976d2;
        color:white;
        transition: 0.3s;
    }
    button:hover {
        background:#0d47a1;
    }
    .result {
        margin-top:20px;
        padding:14px;
        border-radius:8px;
        font-size:18px;
        font-weight:bold;
        text-align:center;
        animation: fadeIn 0.3s ease;
    }
    .normal { background:#e8f5e9; color:#2e7d32; }
    .abnormal { background:#ffebee; color:#c62828; }
    .inconclusive { background:#fff8e1; color:#f9a825; }
</style>
</head>
<body>

<div class="card">
    <h1>Healthcare Test Prediction</h1>

    <div class="grid">

        <div><label>Age</label><input id="Age" type="number"></div>
        <div><label>Gender</label><input id="Gender" type="number" min="0" max="1"></div>

        <div><label>Blood Type</label><input id="Blood_Type" type="number"></div>
        <div><label>Medical Condition</label><input id="Medical_Condition" type="number"></div>

        <div><label>Billing Amount</label><input id="Billing_Amount" type="number"></div>
        <div><label>Admission Type</label><input id="Admission_Type" type="number"></div>

        <div><label>Medication</label><input id="Medication" type="number"></div>
        <div><label>Symptom Severity</label><input id="Symptom_Severity" type="number"></div>

        <div><label>Prior Hospital Visits</label><input id="Prior_Hospital_Visits" type="number"></div>
        <div><label>High BP Flag</label><input id="High_BP_Flag" type="number"></div>

        <div><label>High Sugar Flag</label><input id="High_Sugar_Flag" type="number"></div>
        <div><label>Fever Flag</label><input id="Fever_Flag" type="number"></div>

        <div style="grid-column:1/-1">
            <label>Risk Score</label>
            <input id="Risk_Score" type="number">
        </div>

        <div style="grid-column:1/-1">
            <button onclick="predict()">Predict</button>
        </div>
    </div>

    <div id="resultBox" style="display:none" class="result"></div>

</div>

<script>
const API = "https://ds-project-backend.onrender.com/predict";

async function predict() {
    const payload = {
        Age: Number(Age.value),
        Gender: Number(Gender.value),
        Blood_Type: Number(Blood_Type.value),
        Medical_Condition: Number(Medical_Condition.value),
        Billing_Amount: Number(Billing_Amount.value),
        Admission_Type: Number(Admission_Type.value),
        Medication: Number(Medication.value),
        Symptom_Severity: Number(Symptom_Severity.value),
        Prior_Hospital_Visits: Number(Prior_Hospital_Visits.value),
        High_BP_Flag: Number(High_BP_Flag.value),
        High_Sugar_Flag: Number(High_Sugar_Flag.value),
        Fever_Flag: Number(Fever_Flag.value),
        Risk_Score: Number(Risk_Score.value)
    };

    let res = await fetch(API, {
        method:"POST",
        headers:{ "Content-Type":"application/json" },
        body: JSON.stringify(payload)
    });

    let data = await res.json();

    const box = document.getElementById("resultBox");
    box.style.display = "block";

    if (!res.ok) {
        box.className = "result abnormal";
        box.innerHTML = "Server Error ❌ <br>" + data.detail;
        return;
    }

    const label = data.prediction_label.toLowerCase();

    if (label.includes("normal")){
        box.className = "result normal";
        box.innerHTML = "Prediction: NORMAL ✔️";
    }
    else if (label.includes("abnormal")){
        box.className = "result abnormal";
        box.innerHTML = "Prediction: ABNORMAL ❗";
    }
    else {
        box.className = "result inconclusive";
        box.innerHTML = "Prediction: INCONCLUSIVE ❓";
    }
}
</script>

</body>
</html>
