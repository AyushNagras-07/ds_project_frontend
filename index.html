<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Healthcare Test Result Prediction</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body { font-family: "Segoe UI", Roboto, Arial; background:#f4f7fb; color:#222; padding:30px;}
  .card { max-width:1000px; margin:auto; background:white; padding:20px; border-radius:10px; box-shadow:0 8px 24px rgba(0,0,0,0.08);}
  h1 { margin-top:0; }
  .grid { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
  label { font-size:0.9rem; color:#444; }
  input { width:100%; padding:8px 10px; margin-top:6px; border-radius:6px; border:1px solid #ccc; }
  .full { grid-column:1/-1; }
  button { padding:10px 16px; border-radius:6px; border:none; background:#007bff; color:#fff; font-weight:600; cursor:pointer; }
  button.secondary { background:#6c757d; }
  .result { padding:12px; border-radius:8px; margin-top:12px; font-weight:700; }
  .result.normal { background:#e6fff2; color:#046b2f; }
  .result.abnormal { background:#fff1f0; color:#8b0000; }
  .result.inconclusive { background:#fff8e6; color:#7a5c00; }
</style>
</head>
<body>
  <div class="card">
    <h1>Healthcare Test Result Prediction</h1>

    <div class="grid">

      <div><label>Age</label><input id="Age" type="number" value="35"></div>
      <div><label>Gender</label><input id="Gender" type="number" value="0"></div>

      <div><label>Blood Type (encoded)</label>
        <input id="Blood Type" type="number" value="1">
      </div>

      <div><label>Medical Condition (encoded)</label>
        <input id="Medical Condition" type="number" value="0">
      </div>

      <div><label>Billing Amount</label>
        <input id="Billing Amount" type="number" value="12000">
      </div>

      <div><label>Admission Type</label>
        <input id="Admission Type" type="number" value="0">
      </div>

      <div><label>Medication</label>
        <input id="Medication" type="number" value="0">
      </div>

      <div><label>Symptom Severity</label>
        <input id="Symptom_Severity" type="number" value="1">
      </div>

      <div><label>Prior Hospital Visits</label>
        <input id="Prior_Hospital_Visits" type="number" value="0">
      </div>

      <div><label>High BP Flag</label>
        <input id="High_BP_Flag" type="number" value="0">
      </div>

      <div><label>High Sugar Flag</label>
        <input id="High_Sugar_Flag" type="number" value="0">
      </div>

      <div><label>Fever Flag</label>
        <input id="Fever_Flag" type="number" value="0">
      </div>

      <div class="full">
        <label>Risk Score</label>
        <input id="Risk_Score" value="11">
      </div>

      <div class="full">
        <button onclick="predict()">Predict</button>
      </div>

      <div id="resultBox" class="full" style="display:none"></div>

    </div>
  </div>

<script>
const API_BASE = "https://ds-project-backend.onrender.com"; 

async function predict() {
  const payload = {
    "Age": parseFloat(document.getElementById("Age").value),
    "Gender": parseFloat(document.getElementById("Gender").value),
    "Blood Type": parseFloat(document.getElementById("Blood Type").value),
    "Medical Condition": parseFloat(document.getElementById("Medical Condition").value),
    "Billing Amount": parseFloat(document.getElementById("Billing Amount").value),
    "Admission Type": parseFloat(document.getElementById("Admission Type").value),
    "Medication": parseFloat(document.getElementById("Medication").value),
    "Symptom_Severity": parseFloat(document.getElementById("Symptom_Severity").value),
    "Prior_Hospital_Visits": parseFloat(document.getElementById("Prior_Hospital_Visits").value),
    "High_BP_Flag": parseFloat(document.getElementById("High_BP_Flag").value),
    "High_Sugar_Flag": parseFloat(document.getElementById("High_Sugar_Flag").value),
    "Fever_Flag": parseFloat(document.getElementById("Fever_Flag").value),
    "Risk_Score": parseFloat(document.getElementById("Risk_Score").value)
  };

  const res = await fetch(API_BASE + "/predict", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify(payload)
  });

  const data = await res.json();

  const box = document.getElementById("resultBox");
  box.style.display = "block";
  box.className = "result full";

  if (data.prediction_label === "NORMAL") {
    box.classList.add("normal");
    box.innerHTML = "Prediction: NORMAL ✔️";
  } else if (data.prediction_label === "ABNORMAL") {
    box.classList.add("abnormal");
    box.innerHTML = "Prediction: ABNORMAL ❗";
  } else {
    box.classList.add("inconclusive");
    box.innerHTML = "Prediction: INCONCLUSIVE ❓";
  }
}
</script>

</body>
</html>
